<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using TMKMS | Osmosis Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" type="text/css" href="https://cloud.typography.com/7420256/6416592/css/fonts.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:400,500,700&amp;display=swap">
    <link rel="icon" type="image/png" href="/img/favicondocs.png">
    <script>window.onload = function() {
        requestAnimationFrame(function() {
          if (location.hash) {
            const element = document.getElementById(location.hash.slice(1))

            if (element) {
              element.scrollIntoView()
            }
          }
        })
      }</script>
    <meta name="description" content="Osmosis - The Cosmos Interchain AMM">
    <meta property="og:image" content="/img/osmosis-tile.png">
    
    <link rel="preload" href="/assets/css/0.styles.84e08b3a.css" as="style"><link rel="preload" href="/assets/js/app.32531232.js" as="script"><link rel="preload" href="/assets/js/3.dc07ba1b.js" as="script"><link rel="preload" href="/assets/js/39.4cb2710c.js" as="script"><link rel="prefetch" href="/assets/js/10.24c9e6a0.js"><link rel="prefetch" href="/assets/js/11.9628ca2f.js"><link rel="prefetch" href="/assets/js/12.96cef48e.js"><link rel="prefetch" href="/assets/js/13.79410aca.js"><link rel="prefetch" href="/assets/js/14.d4b1776a.js"><link rel="prefetch" href="/assets/js/15.49856e6a.js"><link rel="prefetch" href="/assets/js/16.ab59fd71.js"><link rel="prefetch" href="/assets/js/17.bc89293a.js"><link rel="prefetch" href="/assets/js/18.6bd42386.js"><link rel="prefetch" href="/assets/js/19.dda4dbaa.js"><link rel="prefetch" href="/assets/js/20.7b929709.js"><link rel="prefetch" href="/assets/js/21.038bae74.js"><link rel="prefetch" href="/assets/js/22.a8ee6a06.js"><link rel="prefetch" href="/assets/js/23.8b341ab2.js"><link rel="prefetch" href="/assets/js/24.eea4c5a3.js"><link rel="prefetch" href="/assets/js/25.3caf27cf.js"><link rel="prefetch" href="/assets/js/26.e4cc46dc.js"><link rel="prefetch" href="/assets/js/27.d89b1b6a.js"><link rel="prefetch" href="/assets/js/28.cd5c0810.js"><link rel="prefetch" href="/assets/js/29.e78a697a.js"><link rel="prefetch" href="/assets/js/30.7ff295ac.js"><link rel="prefetch" href="/assets/js/31.89cd90c1.js"><link rel="prefetch" href="/assets/js/32.500bdc4c.js"><link rel="prefetch" href="/assets/js/33.b34f3dea.js"><link rel="prefetch" href="/assets/js/34.c7dfd829.js"><link rel="prefetch" href="/assets/js/35.659914c9.js"><link rel="prefetch" href="/assets/js/36.f1ea6732.js"><link rel="prefetch" href="/assets/js/37.de1b11b0.js"><link rel="prefetch" href="/assets/js/38.442c5dd8.js"><link rel="prefetch" href="/assets/js/4.43314de7.js"><link rel="prefetch" href="/assets/js/40.de8f81b4.js"><link rel="prefetch" href="/assets/js/41.1d2a05a9.js"><link rel="prefetch" href="/assets/js/42.b2dddcd3.js"><link rel="prefetch" href="/assets/js/43.7ef756bc.js"><link rel="prefetch" href="/assets/js/44.1dd30195.js"><link rel="prefetch" href="/assets/js/45.1f8ac903.js"><link rel="prefetch" href="/assets/js/46.dff410da.js"><link rel="prefetch" href="/assets/js/47.8d1e9070.js"><link rel="prefetch" href="/assets/js/48.320439d1.js"><link rel="prefetch" href="/assets/js/49.a0a96abd.js"><link rel="prefetch" href="/assets/js/5.62264d9d.js"><link rel="prefetch" href="/assets/js/50.b101be4c.js"><link rel="prefetch" href="/assets/js/51.a7473b60.js"><link rel="prefetch" href="/assets/js/52.85fc4b01.js"><link rel="prefetch" href="/assets/js/53.298056bd.js"><link rel="prefetch" href="/assets/js/54.5432f8a0.js"><link rel="prefetch" href="/assets/js/55.5f8edf51.js"><link rel="prefetch" href="/assets/js/56.725151b4.js"><link rel="prefetch" href="/assets/js/57.1e25c5b5.js"><link rel="prefetch" href="/assets/js/58.9406edc6.js"><link rel="prefetch" href="/assets/js/59.7cc02356.js"><link rel="prefetch" href="/assets/js/6.00653ee5.js"><link rel="prefetch" href="/assets/js/60.0dbf593e.js"><link rel="prefetch" href="/assets/js/61.7a2ba206.js"><link rel="prefetch" href="/assets/js/62.22c61077.js"><link rel="prefetch" href="/assets/js/63.cca42649.js"><link rel="prefetch" href="/assets/js/64.485cf628.js"><link rel="prefetch" href="/assets/js/65.c0a4bb4a.js"><link rel="prefetch" href="/assets/js/66.39ff7150.js"><link rel="prefetch" href="/assets/js/67.723bf134.js"><link rel="prefetch" href="/assets/js/68.7727bd66.js"><link rel="prefetch" href="/assets/js/69.0dc00633.js"><link rel="prefetch" href="/assets/js/7.fb0ba830.js"><link rel="prefetch" href="/assets/js/70.7610d6a9.js"><link rel="prefetch" href="/assets/js/71.7aea590c.js"><link rel="prefetch" href="/assets/js/72.9c827157.js"><link rel="prefetch" href="/assets/js/73.230d4be5.js"><link rel="prefetch" href="/assets/js/74.3857d72c.js"><link rel="prefetch" href="/assets/js/75.08b688e3.js"><link rel="prefetch" href="/assets/js/76.57dbfe78.js"><link rel="prefetch" href="/assets/js/77.53c60ede.js"><link rel="prefetch" href="/assets/js/78.7625489c.js"><link rel="prefetch" href="/assets/js/79.aed08a71.js"><link rel="prefetch" href="/assets/js/8.77b1a7e0.js"><link rel="prefetch" href="/assets/js/80.cb4ece8a.js"><link rel="prefetch" href="/assets/js/81.7a03b230.js"><link rel="prefetch" href="/assets/js/82.440eb100.js"><link rel="prefetch" href="/assets/js/83.4eb9cba1.js"><link rel="prefetch" href="/assets/js/84.15050ea0.js"><link rel="prefetch" href="/assets/js/85.a9ee8a97.js"><link rel="prefetch" href="/assets/js/86.7ae174bf.js"><link rel="prefetch" href="/assets/js/87.ef719b9a.js"><link rel="prefetch" href="/assets/js/88.f7c13c61.js"><link rel="prefetch" href="/assets/js/89.ad96360f.js"><link rel="prefetch" href="/assets/js/9.64996de1.js"><link rel="prefetch" href="/assets/js/90.5137308b.js"><link rel="prefetch" href="/assets/js/91.c28bd5a9.js"><link rel="prefetch" href="/assets/js/92.22324996.js"><link rel="prefetch" href="/assets/js/93.7eacf4ca.js"><link rel="prefetch" href="/assets/js/94.99d8e8bb.js"><link rel="prefetch" href="/assets/js/95.7e47eedc.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.66930185.js">
    <link rel="stylesheet" href="/assets/css/0.styles.84e08b3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"></div> <a href="/" class="home-link router-link-active"><img src="/img/osmosis-logo-dark.svg" alt="Osmosis Docs" class="logo"> <span class="site-name can-hide">Osmosis Docs</span></a> <a href="/" class="home-link router-link-active"><img src="/img/osmosis-logo-light.svg" alt="Osmosis Docs" class="logoDark"> <span class="site-name can-hide">Osmosis Docs</span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/developing/" class="nav-link router-link-active">Develop</a></div><div class="nav-item"><a href="/infra/" class="nav-link">Infra</a></div><div class="nav-item"><a href="/validators/" class="nav-link">Validate</a></div><div class="nav-item"><a href="/integrate/" class="nav-link">Integrate</a></div><div class="nav-item"><a href="https://github.com/osmosis-labs/docs" target="_blank" rel="noopener noreferrer" class="nav-link external"><div class="nav-icon"><img src="/img/github.svg"></div></a></div></nav> <form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form></div></header> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/developing/" class="nav-link router-link-active">Develop</a></div><div class="nav-item"><a href="/infra/" class="nav-link">Infra</a></div><div class="nav-item"><a href="/validators/" class="nav-link">Validate</a></div><div class="nav-item"><a href="/integrate/" class="nav-link">Integrate</a></div><div class="nav-item"><a href="https://github.com/osmosis-labs/docs" target="_blank" rel="noopener noreferrer" class="nav-link external"><div class="nav-icon"><img src="/img/github.svg"></div></a></div></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Building dApps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Osmosis Core</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Networks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Relaying</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Asset Info</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Key Management</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/developing/keys/" aria-current="page" class="sidebar-link">Keys Home</a></li><li><a href="/developing/keys/keys-cli.html" class="sidebar-link">Basic Key Management</a></li><li><a href="/developing/keys/multisig.html" class="sidebar-link">Multisig</a></li><li><a href="/developing/keys/tmkms.html" aria-current="page" class="active sidebar-link">Using TMKMS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developing/keys/tmkms.html#prepare-tmkms-dependencies" class="sidebar-link">Prepare TMKMS Dependencies</a></li><li class="sidebar-sub-header"><a href="/developing/keys/tmkms.html#setup-tmkms" class="sidebar-link">Setup TMKMS</a></li><li class="sidebar-sub-header"><a href="/developing/keys/tmkms.html#final-notes" class="sidebar-link">Final Notes</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Osmosis Frontend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guides</span> <span class="arrow right"></span></p> <!----></section></li></ul>  <div class="sidebar_footer"></div></aside> <main class="page"> <nav id="breadcrumb" class="breadcrumb-container" data-v-684968f4><a href="/" class="breadcrumb router-link-active" data-v-684968f4><span data-v-684968f4>Home</span></a><a href="/developing/" class="breadcrumb router-link-active" data-v-684968f4><span data-v-684968f4>Developing in Osmosis</span></a><a href="/developing/keys/" class="breadcrumb router-link-active" data-v-684968f4><span data-v-684968f4>Keys Home</span></a><a href="/developing/keys/tmkms.html" aria-current="page" class="breadcrumb router-link-exact-active router-link-active" data-v-684968f4><span data-v-684968f4>Using TMKMS</span></a></nav> <div class="theme-default-content content__default"><h1 id="using-tmkms"><a href="#using-tmkms" class="header-anchor">#</a> Using TMKMS</h1> <p>The Tendermint Key Management System (or TMKMS) should be used by any validator currently or intending to be in the active validator set. This application mitigates the risk of double-signing and provides high-availability to validator keys while keeping these keys on a separate physical host. While TMKMS can be used on the same machine as the validator, it is recommended to be on a separate host.</p> <h2 id="prepare-tmkms-dependencies"><a href="#prepare-tmkms-dependencies" class="header-anchor">#</a> Prepare TMKMS Dependencies</h2> <p>Start by opening the node you intend to run TMKMS (not the node you validate on) and install the following dependencies:
<br></p> <p><strong>Rust</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">curl</span> --proto <span class="token string">'=https'</span> --tlsv1.2 -sSf https://sh.rustup.rs <span class="token operator">|</span> <span class="token function">sh</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">source</span> <span class="token environment constant">$HOME</span>/.cargo/env
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <p><strong>GCC</strong></p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="ubuntu" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">git</span> build-essential ufw <span class="token function">curl</span> jq snapd --yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></section> <section aria-hidden="true" id="mac" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>brew <span class="token function">install</span> gcc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></section></div></div> <p><strong>Libusb</strong></p> <div class="tabs-component"><ul role="tablist" class="tabs-component-tabs"></ul> <div class="tabs-component-panels"><section aria-hidden="true" id="ubuntu" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">apt</span> <span class="token function">install</span> libusb-1.0-0-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></section> <section aria-hidden="true" id="mac" role="tabpanel" class="tabs-component-panel" style="display:none;"><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>brew <span class="token function">install</span> libusb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></section></div></div> <p>If on x86_64 architecture:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">RUSTFLAGS</span><span class="token operator">=</span>-Ctarget-feature<span class="token operator">=</span>+aes,+ssse3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="setup-tmkms"><a href="#setup-tmkms" class="header-anchor">#</a> Setup TMKMS</h2> <p>In this example, we will be compiling from the github source code using the <code>--features=softsign</code> flag, however you may use <code>--features=yubihsm</code> if you want to use a yubikey (ledger support is not working properly at the moment, and this guide will not go into using yubihsm).</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
<span class="token function">git</span> clone https://github.com/iqlusioninc/tmkms.git
<span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>/tmkms
cargo <span class="token function">install</span> tmkms --features<span class="token operator">=</span>softsign
tmkms init config
tmkms softsign keygen ./config/secrets/secret_connection_key
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Now we will transfer your validator private key from your validator to your VM running TMKMS. You can do this manually or though scp. I will use scp in this example (the validator has the IP of 123.456.32.123):</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">scp</span> user@123.456.32.123:~/.osmosisd/config/priv_validator_key.json ~/tmkms/config/secrets
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Then, import the private validator key into tmkms:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>tmkms softsign <span class="token function">import</span> <span class="token environment constant">$HOME</span>/tmkms/config/secrets/priv_validator_key.json <span class="token environment constant">$HOME</span>/tmkms/config/secrets/priv_validator_key
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Please note at this point, you could delete the <code>priv_validator_key.json</code> from both your validator node and tmkms node and store it safely offline in case of an emergency. This newly created <code>priv_validator_key</code> will be what TMKMS will use to sign for your validator.</p> <p>Now, modify the <code>tmkms.toml</code> file</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">nano</span> <span class="token environment constant">$HOME</span>/tmkms/config/tmkms.toml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>In this example, my validator has the IP address of 123.456.32.123 and we will be using port 26659 to feed the validator key to the validator. We will also be using chain_id <code>osmosis-1</code>, but if you are doing this on the testnet be sure to use <code>osmo-test-4</code> instead:</p> <div class="language-toml line-numbers-mode"><pre class="language-toml"><code><span class="token comment"># Tendermint KMS configuration file</span>

<span class="token comment">## Chain Configuration</span>

<span class="token comment">### Cosmos Hub Network</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">chain</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">id</span> <span class="token punctuation">=</span> <span class="token string">&quot;osmosis-1&quot;</span>
<span class="token key property">key_format</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span> <span class="token key property">type</span> <span class="token punctuation">=</span> <span class="token string">&quot;bech32&quot;</span><span class="token punctuation">,</span> <span class="token key property">account_key_prefix</span> <span class="token punctuation">=</span> <span class="token string">&quot;osmopub&quot;</span><span class="token punctuation">,</span> <span class="token key property">consensus_key_prefix</span> <span class="token punctuation">=</span> <span class="token string">&quot;osmovalconspub&quot;</span> <span class="token punctuation">}</span>
<span class="token key property">state_file</span> <span class="token punctuation">=</span> <span class="token string">&quot;/root/tmkms/config/state/priv_validator_state.json&quot;</span>

<span class="token comment">## Signing Provider Configuration</span>

<span class="token comment">### Software-based Signer Configuration</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">providers.softsign</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">chain_ids</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;osmosis-1&quot;</span><span class="token punctuation">]</span>
<span class="token key property">key_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;consensus&quot;</span>
<span class="token key property">path</span> <span class="token punctuation">=</span> <span class="token string">&quot;/root/tmkms/config/secrets/priv_validator_key&quot;</span>

<span class="token comment">## Validator Configuration</span>

<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">validator</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">chain_id</span> <span class="token punctuation">=</span> <span class="token string">&quot;osmosis-1&quot;</span>
<span class="token key property">addr</span> <span class="token punctuation">=</span> <span class="token string">&quot;tcp://123.456.32.123:26659&quot;</span>
<span class="token key property">secret_key</span> <span class="token punctuation">=</span> <span class="token string">&quot;/root/tmkms/config/secrets/secret_connection_key&quot;</span>
<span class="token key property">protocol_version</span> <span class="token punctuation">=</span> <span class="token string">&quot;v0.34&quot;</span>
<span class="token key property">reconnect</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>Now, modify your validators <code>config.toml</code> to use the port you selected in the <code>tmkms.toml</code> file:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">nano</span> <span class="token environment constant">$HOME</span>/.osmosisd/config/config.toml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-toml line-numbers-mode"><pre class="language-toml"><code><span class="token key property">priv_validator_laddr</span> <span class="token punctuation">=</span> <span class="token string">&quot;tcp://0.0.0.0:26659&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>It is also recommended to comment out the <code>priv_validator_key_file</code> line and the <code>priv_validator_state_file</code> line:</p> <div class="language-toml line-numbers-mode"><pre class="language-toml"><code><span class="token comment"># Path to the JSON file containing the private key to use as a validator in the consensus protocol</span>
<span class="token comment"># priv_validator_key_file = &quot;config/priv_validator_key.json&quot;</span>

<span class="token comment"># Path to the JSON file containing the last sign state of a validator</span>
<span class="token comment"># priv_validator_state_file = &quot;data/priv_validator_state.json&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Next, stop the validator. Move back to your VM running TMKMS and start it:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>tmkms start -c <span class="token environment constant">$HOME</span>/tmkms/config/tmkms.toml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>You will see error logs like the following:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>2022-03-08T23:42:37.926816Z  INFO tmkms::commands::start: tmkms 0.11.0 starting up...
2022-03-08T23:42:37.926968Z  INFO tmkms::keyring: [keyring:softsign] added consensus Ed25519 key: osmovalconspub1zcjduepq2qfkp3ahrhaafzuqglme9mares0eluj58xr6cy7c37cdmzq0eecqk0yehr
2022-03-08T23:42:37.927216Z  INFO tmkms::connection::tcp: KMS node ID: 948f8fee83f7715f99b8b8a53d746ef00e7b0d9e
2022-03-08T23:42:37.929454Z ERROR tmkms::client: [osmosis-1@tcp://123.456.32.123:26659] I/O error: Connection refused (os error 111)
2022-03-08T23:42:38.929746Z  INFO tmkms::connection::tcp: KMS node ID: 948f8fee83f7715f99b8b8a53d746ef00e7b0d9e
2022-03-08T23:42:38.931428Z ERROR tmkms::client: [osmosis-1@tcp://123.456.32.123:26659] I/O error: Connection refused (os error 111)
2022-03-08T23:42:39.931729Z  INFO tmkms::connection::tcp: KMS node ID: 948f8fee83f7715f99b8b8a53d746ef00e7b0d9e
2022-03-08T23:42:39.932417Z ERROR tmkms::client: [osmosis-1@tcp://123.456.32.123:26659] I/O error: Connection refused (os error 111)
2022-03-08T23:42:40.932732Z  INFO tmkms::connection::tcp: KMS node ID: 948f8fee83f7715f99b8b8a53d746ef00e7b0d9e
2022-03-08T23:42:40.933425Z ERROR tmkms::client: [osmosis-1@tcp://123.456.32.123:26659] I/O error: Connection refused (os error 111)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Now, start your osmosis validator on the validator node:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>osmosisd start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Your TMKMS node will now show logs like the following:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>2022-03-08T23:46:06.208451Z  INFO tmkms::connection::tcp: KMS node ID: 948f8fee83f7715f99b8b8a53d746ef00e7b0d9e
2022-03-08T23:46:06.210568Z  INFO tmkms::session: [osmosis-1@tcp://164.92.136.160:26659] connected to validator successfully
2022-03-08T23:46:06.210604Z  WARN tmkms::session: [osmosis-1@tcp://164.92.136.160:26659]: unverified validator peer ID! (ba44dd36899602e255b04e3608e5ef0fe4bc5f5b)
2022-03-08T23:46:15.929787Z  INFO tmkms::session: [osmosis-1@tcp://164.92.136.160:26659] signed PreCommit:&lt;nil&gt; at h/r/s 3399910/0/2 (0 ms)
2022-03-08T23:46:17.344579Z  INFO tmkms::session: [osmosis-1@tcp://164.92.136.160:26659] signed PreCommit:&lt;nil&gt; at h/r/s 3399911/0/2 (0 ms)
2022-03-08T23:46:22.367627Z  INFO tmkms::session: [osmosis-1@tcp://164.92.136.160:26659] signed PreCommit:&lt;nil&gt; at h/r/s 3399912/0/2 (0 ms)
2022-03-08T23:46:27.409777Z  INFO tmkms::session: [osmosis-1@tcp://164.92.136.160:26659] signed PreCommit:&lt;nil&gt; at h/r/s 3399913/0/2 (0 ms)
2022-03-08T23:46:32.442300Z  INFO tmkms::session: [osmosis-1@tcp://164.92.136.160:26659] signed PreCommit:&lt;nil&gt; at h/r/s 3399914/0/2 (0 ms)
2022-03-08T23:46:37.452162Z  INFO tmkms::session: [osmosis-1@tcp://164.92.136.160:26659] signed PreCommit:&lt;nil&gt; at h/r/s 3399915/0/2 (0 ms)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>You should now be signing blocks! If you cancel the TMKMS process, you will no longer sign blocks and will stop syncing. If you restart the TMKMS process, your validator node will continue to sync from where it left off.</p> <h2 id="final-notes"><a href="#final-notes" class="header-anchor">#</a> Final Notes</h2> <p>Please note that this is a bare minimum setup. More robust settings such as setting up a firewall to only allow your TMKMS node to get through the priv_validator_laddr port would make your validator even more secure.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/osmosis-labs/docs/edit/main/developing/keys/tmkms.md" target="_blank" rel="noopener noreferrer"><img src="/img/github.svg" style="max-width:25px;vertical-align:middle;"> 
    Edit this page on GitHub</a></div> <div class="last-updated"><span class="prefix">Updated on:</span> <span class="time">7/1/2022, 6:14:44 PM</span></div></footer> <div class="page-nav"><div class="inner"><div class="prev"><a href="/developing/keys/multisig.html">Multisig</a></div> <div class="next"><a href="/developing/web-dev-guide.html">Osmosis Web Interface</a></div></div></div>  <div class="footer-container"><div class="company"><div class="copyright">Osmosis Labs</div></div> <div class="links-container"><ul class="learn"><li>Learn</li> <li><a href="https://medium.com/@Osmosis" target="_blank">Medium</a></li> <li><a href="https://commonwealth.im/osmosis/" target="_blank">Commonwealth</a></li></ul> <ul class="developers"><li>Tools</li> <li><a href="https://app.osmosis.zone" target="_blank">Osmosis App</a></li> <li><a href="https://www.mintscan.io/osmosis" target="_blank">Osmosis Explorer</a></li> <li><a href="https://info.osmosis.zone/" target="_blank">Stats</a></li></ul> <ul class="developers"><li>Osmo</li> <li><a href="https://docs.osmosis.zone/overview/osmo.html#purpose" target="_blank">What is Osmo?</a></li> <li><a href="https://docs.osmosis.zone/overview/osmosis-app/#bonding-lp-tokens" target="_blank">Pools</a></li> <li><a href="https://docs.osmosis.zone/overview/wallets/keplr/" target="_blank">Wallets</a></li></ul> <ul class="developers"><li>Foundation</li> <li><a href="https://angel.co/company/osmosis-labs/jobs" target="_blank">Careers</a></li></ul> <ul class="developers"><li>Developers</li> <li><a href="https://github.com/osmosis-labs" target="_blank">Github</a></li></ul> <ul class="developers"><li>Validators</li> <li><a href="https://docs.osmosis.zone/validators/" target="_blank">Validator Guide</a></li> <li><a href="https://discord.gg/3gSAbqV3Qp" target="_blank">Discord Channel</a></li></ul></div> <div class="sns-container"><div class="logos"><a href="https://discord.gg/3gSAbqV3Qp" rel="noopener" target="_blank"><img src="/img/discord.svg" alt="link to Osmosis discord room"></a> <a href="https://medium.com/@Osmosis" rel="noopener" target="_blank"><img src="/img/medium.svg" alt="link to Osmosis medium"></a> <a href="https://twitter.com/osmosiszone" rel="noopener" target="_blank"><img src="/img/twitter.svg" alt="link to Osmosis twitter"></a> <a href="https://www.youtube.com/channel/UC3ScmmLC4WUJAkINyf_p2Rw" rel="noopener" target="_blank"><img src="/img/icon_youtube.png" alt="link to Osmosis youtube"></a> <a href rel="noopener" target="_blank"><img src="/img/icon_telegram.png" alt="link to Osmosis telegram room"></a></div> <a href="https://www.osmosis.zone" target="_blank" class="osmosiszone">osmosis.zone</a></div></div></main></div><div class="global-ui"><div class="darkmode-switch"><div class="item day active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon"><path d="M512 256a42.666667 42.666667 0 0 0 42.666667-42.666667V128a42.666667 42.666667 0 0 0-85.333334 0v85.333333a42.666667 42.666667 0 0 0 42.666667 42.666667zM896 469.333333h-85.333333a42.666667 42.666667 0 0 0 0 85.333334h85.333333a42.666667 42.666667 0 0 0 0-85.333334zM256 512a42.666667 42.666667 0 0 0-42.666667-42.666667H128a42.666667 42.666667 0 0 0 0 85.333334h85.333333a42.666667 42.666667 0 0 0 42.666667-42.666667zM265.386667 213.333333a42.666667 42.666667 0 0 0-59.306667 62.72l61.44 59.306667a42.666667 42.666667 0 0 0 31.146667 11.946667 42.666667 42.666667 0 0 0 30.72-13.226667 42.666667 42.666667 0 0 0 0-60.16zM725.333333 347.306667a42.666667 42.666667 0 0 0 29.44-11.946667l61.44-59.306667A42.666667 42.666667 0 0 0 758.613333 213.333333l-61.44 60.586667a42.666667 42.666667 0 0 0 0 60.16 42.666667 42.666667 0 0 0 28.16 13.226667zM512 768a42.666667 42.666667 0 0 0-42.666667 42.666667v85.333333a42.666667 42.666667 0 0 0 85.333334 0v-85.333333a42.666667 42.666667 0 0 0-42.666667-42.666667zM756.48 688.64a42.666667 42.666667 0 0 0-59.306667 61.44L758.613333 810.666667a42.666667 42.666667 0 0 0 29.44 11.946666 42.666667 42.666667 0 0 0 30.72-12.8 42.666667 42.666667 0 0 0 0-60.586666zM267.52 688.64l-61.44 59.306667a42.666667 42.666667 0 0 0 0 60.586666 42.666667 42.666667 0 0 0 30.72 12.8 42.666667 42.666667 0 0 0 28.586667-10.666666l61.44-59.306667a42.666667 42.666667 0 0 0-59.306667-61.44zM512 341.333333a170.666667 170.666667 0 1 0 170.666667 170.666667 170.666667 170.666667 0 0 0-170.666667-170.666667z"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon"><path d="M935.538601 630.40178c-11.43005-11.432249-28.673759-14.738607-43.531086-8.353536-46.733115 20.10317-96.362866 30.296859-147.50719 30.296859-99.589478 0-193.221796-38.783705-263.640252-109.20316-108.636744-108.636744-139.609745-270.022125-78.9083-411.148441 6.388069-14.85233 3.078713-32.098837-8.353536-43.532285-11.432249-11.432249-28.675758-14.743604-43.532285-8.354536-52.637312 22.64025-100.017388 54.809439-140.82552 95.616372-85.346135 85.346135-132.346869 198.821199-132.346869 319.519766 0 120.699566 47.001733 234.172631 132.347868 319.518766s198.821199 132.349067 319.517567 132.349067c120.699566 0 234.172431-47.002932 319.520765-132.351066 40.808132-40.810131 72.977122-88.190207 95.615373-140.82552C950.282205 659.081735 946.971849 641.834029 935.538601 630.40178z" p-id="3638"></path></svg></div></div></div></div>
    <script src="/assets/js/app.32531232.js" defer></script><script src="/assets/js/3.dc07ba1b.js" defer></script><script src="/assets/js/39.4cb2710c.js" defer></script>
  </body>
</html>
