"use strict";(self.webpackChunkosmosis_docs=self.webpackChunkosmosis_docs||[]).push([[4620],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>c});var n=a(67294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),m=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=m(a),c=l,k=u["".concat(s,".").concat(c)]||u[c]||d[c]||o;return a?n.createElement(k,r(r({ref:t},p),{},{components:a})):n.createElement(k,r({ref:t},p))}));function c(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=a.length,r=new Array(o);r[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:l,r[1]=i;for(var m=2;m<o;m++)r[m]=a[m];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},77904:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>m});var n=a(87462),l=(a(67294),a(3905));const o={title:"Local Testing",sidebar_position:3},r="LocalOsmosis",i={unversionedId:"localtesting",id:"localtesting",title:"Local Testing",description:"What is LocalOsmosis?",source:"@site/docs/osmosis-core/localtesting.md",sourceDirName:".",slug:"/localtesting",permalink:"/osmosis-core/localtesting",draft:!1,editUrl:"https://github.com/osmosis-labs/docs/tree/main/docs/osmosis-core/localtesting.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Local Testing",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Build and Test",permalink:"/osmosis-core/build"},next:{title:"Osmosis CLI",permalink:"/osmosis-core/osmosisd"}},s={},m=[{value:"What is LocalOsmosis?",id:"what-is-localosmosis",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Get started",id:"get-started",level:2},{value:"1. LocalOsmosis - No Initial State",id:"1-localosmosis---no-initial-state",level:2},{value:"2. LocalOsmosis - With Mainnet State",id:"2-localosmosis---with-mainnet-state",level:2},{value:"Accounts",id:"accounts",level:2}],p={toc:m};function d(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"localosmosis"},"LocalOsmosis"),(0,l.kt)("h2",{id:"what-is-localosmosis"},"What is LocalOsmosis?"),(0,l.kt)("p",null,"LocalOsmosis (a fork of LocalTerra) is a complete Osmosis testnet and ecosystem containerized with Docker and orchestrated with a simple ",(0,l.kt)("inlineCode",{parentName:"p"},"docker-compose")," file. It simplifies the way smart-contract developers test their contracts in a sandbox before they deploy them on a testnet or mainnet."),(0,l.kt)("p",null,"LocalOsmosis comes preconfigured with opinionated, sensible defaults for standard testing environments. If other projects mention testing on LocalOsmosis, they are referring to the settings defined in this repo."),(0,l.kt)("p",null,"LocalOsmosis has the following advantages over a public testnet:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Easily modifiable world states"),(0,l.kt)("li",{parentName:"ul"},"Quick to reset for rapid iterations"),(0,l.kt)("li",{parentName:"ul"},"Simple simulations of different scenarios"),(0,l.kt)("li",{parentName:"ul"},"Controllable validator behavior")),(0,l.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.docker.com/"},(0,l.kt)("inlineCode",{parentName:"a"},"Docker"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/docker/compose"},(0,l.kt)("inlineCode",{parentName:"a"},"docker-compose"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://get.osmosis.zone"},(0,l.kt)("inlineCode",{parentName:"a"},"Osmosisd")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Select option 3 (localosmosis), the installer will configure everything for you. "),(0,l.kt)("li",{parentName:"ul"},"The osmosisd daemon on your local computer is used to communicate with the localosmosis daemon running inside the Docker container. "))),(0,l.kt)("li",{parentName:"ul"},"Supported known architecture: x86_64"),(0,l.kt)("li",{parentName:"ul"},"16+ GB of RAM is recommended")),(0,l.kt)("h2",{id:"get-started"},"Get started"),(0,l.kt)("h2",{id:"1-localosmosis---no-initial-state"},"1. LocalOsmosis - No Initial State"),(0,l.kt)("p",null,"The following commands must be executed from the root folder of the Osmosis repository."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Make any change to the osmosis code that you want to test")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Initialize LocalOsmosis:"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"make localnet-init\n")),(0,l.kt)("p",null,"The command:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Builds a local docker image with the latest changes"),(0,l.kt)("li",{parentName:"ul"},"Cleans the ",(0,l.kt)("inlineCode",{parentName:"li"},"$HOME/.osmosisd-local")," folder")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"Start LocalOsmosis:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"make localnet-start\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Note"),(0,l.kt)("p",{parentName:"blockquote"},"You can also start LocalOsmosis in detach mode with:"),(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"make localnet-startd"))),(0,l.kt)("ol",{start:4},(0,l.kt)("li",{parentName:"ol"},"(optional) Add your validator wallet and 9 other preloaded wallets automatically:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"make localnet-keys\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"These keys are added to your ",(0,l.kt)("inlineCode",{parentName:"li"},"--keyring-backend test")),(0,l.kt)("li",{parentName:"ul"},"If the keys are already on your keyring, you will get an ",(0,l.kt)("inlineCode",{parentName:"li"},'"Error: aborted"')),(0,l.kt)("li",{parentName:"ul"},"Ensure you use the name of the account as listed in the table below, as well as ensure you append the ",(0,l.kt)("inlineCode",{parentName:"li"},"--keyring-backend test")," to your txs"),(0,l.kt)("li",{parentName:"ul"},"Example: ",(0,l.kt)("inlineCode",{parentName:"li"},"osmosisd tx bank send lo-test2 osmo1cyyzpxplxdzkeea7kwsydadg87357qnahakaks --keyring-backend test --chain-id localosmosis"))),(0,l.kt)("ol",{start:5},(0,l.kt)("li",{parentName:"ol"},"You can stop chain, keeping the state with")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"make localnet-stop\n")),(0,l.kt)("ol",{start:6},(0,l.kt)("li",{parentName:"ol"},"When you are done you can clean up the environment with:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"make localnet-clean\n")),(0,l.kt)("h2",{id:"2-localosmosis---with-mainnet-state"},"2. LocalOsmosis - With Mainnet State"),(0,l.kt)("p",null,"Running an osmosis network with mainnet state is now as easy as setting up a stateless localnet."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Set up a mainnet node and stop it at whatever height you want to fork the network at.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"There are now two options you can choose from:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"Mainnet is on version X, and you want to create a testnet on version X.")),(0,l.kt)("p",{parentName:"li"},"On version X, run:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"osmosisd in-place-testnet localosmosis osmo12smx2wdlyttvyzvzg54y2vnqwq2qjateuf7thj\n")),(0,l.kt)("p",{parentName:"li"}," Where the first input is the desired chain-id of the new network and the second input is the desired validator operator address (where you vote from).\nThe address provided above is included in the localosmosis keyring under the name 'val'."),(0,l.kt)("p",{parentName:"li"},"You now have a network you own with the mainnet state on version X.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"Mainnet is on version X, and you want to create a testnet on version X+1.")),(0,l.kt)("p",{parentName:"li"},"On version X, run:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"osmosisd in-place-testnet localosmosis osmo12smx2wdlyttvyzvzg54y2vnqwq2qjateuf7thj --trigger-testnet-upgrade\n")),(0,l.kt)("p",{parentName:"li"}," Where the first input is the desired chain-id of the new network and the second input is the desired validator operator address (where you vote from).\nThe address provided above is included in the localosmosis keyring under the name 'val'."),(0,l.kt)("p",{parentName:"li"},"The network will start and hit 10 blocks, at which point the upgrade will trigger and the network will halt."),(0,l.kt)("p",{parentName:"li"},"Then, on version X+1, run:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"osmosisd start\n")))))),(0,l.kt)("p",null,"You now have a network you own with the mainnet state on version X+1."),(0,l.kt)("h2",{id:"accounts"},"Accounts"),(0,l.kt)("p",null,"LocalOsmosis is pre-configured with one validator and 9 accounts with ION and OSMO balances. You can also manually add these keys using ",(0,l.kt)("inlineCode",{parentName:"p"},"make localnet-keys")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Account"),(0,l.kt)("th",{parentName:"tr",align:null},"Address"),(0,l.kt)("th",{parentName:"tr",align:null},"Mnemonic"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-val"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo1phaxpevm5wecex2jyaqty2a4v02qj7qmlmzk5a"),(0,l.kt)("br",null),(0,l.kt)("inlineCode",{parentName:"td"},"osmovaloper1phaxpevm5wecex2jyaqty2a4v02qj7qm9v24r6")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"satisfy adjust timber high purchase tuition stool faith fine install that you unaware feed domain license impose boss human eager hat rent enjoy dawn"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test1"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo1cyyzpxplxdzkeea7kwsydadg87357qnahakaks")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"notice oak worry limit wrap speak medal online prefer cluster roof addict wrist behave treat actual wasp year salad speed social layer crew genius"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test2"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo18s5lynnmx37hq4wlrw9gdn68sg2uxp5rgk26vv")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"quality vacuum heart guard buzz spike sight swarm shove special gym robust assume sudden deposit grid alcohol choice devote leader tilt noodle tide penalty"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test3"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo1qwexv7c6sm95lwhzn9027vyu2ccneaqad4w8ka")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"symbol force gallery make bulk round subway violin worry mixture penalty kingdom boring survey tool fringe patrol sausage hard admit remember broken alien absorb"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test4"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo14hcxlnwlqtq75ttaxf674vk6mafspg8xwgnn53")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"bounce success option birth apple portion aunt rural episode solution hockey pencil lend session cause hedgehog slender journey system canvas decorate razor catch empty"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test5"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo12rr534cer5c0vj53eq4y32lcwguyy7nndt0u2t")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"second render cat sing soup reward cluster island bench diet lumber grocery repeat balcony perfect diesel stumble piano distance caught occur example ozone loyal"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test6"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo1nt33cjd5auzh36syym6azgc8tve0jlvklnq7jq")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"spatial forest elevator battle also spoon fun skirt flight initial nasty transfer glory palm drama gossip remove fan joke shove label dune debate quick"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test7"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo10qfrpash5g2vk3hppvu45x0g860czur8ff5yx0")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"noble width taxi input there patrol clown public spell aunt wish punch moment will misery eight excess arena pen turtle minimum grain vague inmate"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test8"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo1f4tvsdukfwh6s9swrc24gkuz23tp8pd3e9r5fa")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"cream sport mango believe inhale text fish rely elegant below earth april wall rug ritual blossom cherry detail length blind digital proof identify ride"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test9"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo1myv43sqgnj5sm4zl98ftl45af9cfzk7nhjxjqh")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"index light average senior silent limit usual local involve delay update rack cause inmate wall render magnet common feature laundry exact casual resource hundred"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"lo-test10"),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"osmo14gs9zqh8m49yy9kscjqu9h72exyf295afg6kgk")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"prefer forget visit mistake mixture feel eyebrow autumn shop pair address airport diesel street pass vague innocent poem method awful require hurry unhappy shoulder"))))))}d.isMDXComponent=!0}}]);