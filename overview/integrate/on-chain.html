<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-overview docs-doc-id-integrate/on-chain">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Concentrated Liquidity Integration | Osmosis Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.osmosis.zone/img/osmosis-docs-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.osmosis.zone/img/osmosis-docs-card.png"><meta data-rh="true" property="og:url" content="https://docs.osmosis.zone/overview/integrate/on-chain"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-overview-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-overview-current"><meta data-rh="true" property="og:title" content="Concentrated Liquidity Integration | Osmosis Docs"><meta data-rh="true" name="description" content="Concentrated liquidity is a novel Automated Market Maker (AMM) design introduced by Uniswap that allows for more efficient use of capital. The improvement is achieved by providing liquidity in specific price ranges chosen by the user."><meta data-rh="true" property="og:description" content="Concentrated liquidity is a novel Automated Market Maker (AMM) design introduced by Uniswap that allows for more efficient use of capital. The improvement is achieved by providing liquidity in specific price ranges chosen by the user."><link data-rh="true" rel="icon" href="/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.osmosis.zone/overview/integrate/on-chain"><link data-rh="true" rel="alternate" href="https://docs.osmosis.zone/overview/integrate/on-chain" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.osmosis.zone/overview/integrate/on-chain" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://O18C1RUI3F-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Osmosis Docs" href="/opensearch.xml">









<link rel="preconnect" href="https://app.posthog.com">
<script>!function(t,e){var o,p,i,n;e.__SV||(window.posthog=e,e._i=[],e.init=function(r,s,a){function c(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(i=t.createElement("script")).type="text/javascript",i.async=!0,i.src=s.api_host+"/static/array.js",(n=t.getElementsByTagName("script")[0]).parentNode.insertBefore(i,n);var g=e;for(void 0!==a?g=e[a]=[]:a="posthog",g.people=g.people||[],g.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},g.people.toString=function(){return g.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset".split(" "),p=0;p<o.length;p++)c(g,o[p]);e._i.push([r,s,a])},e.__SV=1)}(document,window.posthog||[]),posthog.init("00",{api_host:"https://app.posthog.com"})</script>

<script src="https://tally.so/widgets/embed.js"></script>
<script src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="c5b5e9fc-d025-4c12-b08e-9784d0e2161f" data-project-name="Osmosis" data-project-color="#7900B4" data-project-logo="https://app.osmosis.zone/tokens/osmo.svg" async></script><link rel="stylesheet" href="/assets/css/styles.792232e5.css">
<link rel="preload" href="/assets/js/runtime~main.e6c983dc.js" as="script">
<link rel="preload" href="/assets/js/main.8b3b5676.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo/light.svg" alt="Osmosis Docs" class="themedImage_ToTc themedImage--light_HNdA" height="26px" width="114px"><img src="/logo/dark.svg" alt="Osmosis Docs" class="themedImage_ToTc themedImage--dark_i4oU" height="26px" width="114px"></div></a><a class="navbar__item navbar__link" href="/overview/educate">Overview</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/overview/integrate">Integrate</a><a class="navbar__item navbar__link" href="/overview/validate">Validate &amp; Run your Node</a><a class="navbar__item navbar__link" href="/overview/endpoints">Endpoints</a><a class="navbar__item navbar__link" href="/overview/features">Features</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/osmosis-core">Develop</a><a href="https://github.com/osmosis-labs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link pseudo-icon github-icon"></a><a href="https://discord.com/invite/osmosis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link pseudo-icon discord-icon"></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://app.osmosis.zone" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link dev-portal-signup dev-portal-link">Launch Dex<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_mhZE"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/overview/educate">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/overview/integrate">Integrate</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/airdrops">Airdrop Distribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/overview/integrate/on-chain">Concentrated Liquidity Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/transfer">Connect with Osmosis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/registration">Register your Asset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/pool-setup">Pool Setup Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/liquidity">Source Initial Liquidity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/incentives">Liquidity Incentives</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/frontend">Ensure Visibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/cli">Interact with CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/grpc">Interact with gRPC Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/apr">APR Calculation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/rest">Interact with REST</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/rpc">Interact with RPC endpoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/overview/integrate/earn-risk">Determination of Risk Level for Earn Strategies</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/overview/integrate/external_projects">External Projects</a><button aria-label="Toggle the collapsible sidebar category &#x27;External Projects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/overview/validate">Validate &amp; Run your Node</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/overview/endpoints">Endpoints</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/overview/features">Features</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Concentrated Liquidity Integration</h1><p>Concentrated liquidity is a novel Automated Market Maker (AMM) design introduced by Uniswap that allows for more efficient use of capital. The improvement is achieved by providing liquidity in specific price ranges chosen by the user.</p><p>For instance, a pool with stablecoin pairs like USDC/USDT has a spot price that should always be trading near 1. As a result, Liquidity Providers (LPs) can focus their capital in a small range around 1, rather than the full range from 0 to infinity. This approach leads to an average of 200-300x higher capital efficiency. Moreover, traders benefit from lower price impact because the pool incentivizes greater depth around the current price.</p><p>Concentrated liquidity also opens up new opportunities for providing liquidity rewards to desired strategies. For example, it&#x27;s possible to incentivize LPs based on their position&#x27;s proximity to the current price and the time spent within that position. This design also allows for a new &quot;range order&quot; type, similar to a limit order with order-books.</p><p>The following information is meant to provide Vaul Creators with all the information needed to interact and develop concentrated liquidity vaults. </p><h1>Index</h1><ol><li><a href="#On-chain-Vault-Creators">Concentrated liquidity for On-chain Vault Creators</a></li><li><a href="#clients">Clients</a><ul><li><a href="#js-client---osmojs">JS Client - (OsmoJS)</a><ul><li><a href="#install-osmojs">Install OsmoJS</a></li><li><a href="#start-client">Start Client</a></li></ul></li><li><a href="#CosmWasm---osmosis-std">CosmWasm - (<code>osmosis-std</code>)</a></li><li><a href="#hummingbot-client">Hummingbot client</a></li></ul></li><li><a href="#concentrated-liquidity-module-messages">Concentrated Liquidity Module Messages</a><ul><li><a href="#msgcreateposition">MsgCreatePosition</a></li><li><a href="#msgwithdrawposition">MsgWithdrawPosition</a></li><li><a href="#msgcreatepool">MsgCreatePool</a></li><li><a href="#msgcollectspreadrewards">MsgCollectSpreadRewards</a></li><li><a href="#msgfungifychargedpositions">MsgFungifyChargedPositions</a></li></ul></li><li><a href="#incentives">Incentives</a><ul><li><a href="#incentive-creation-and-querying">Incentive Creation and Querying</a></li><li><a href="#reward-splitting-between-classic-and-cl-pools">Reward Splitting Between Classic and CL Pools</a></li></ul></li><li><a href="#parameters">Parameters</a></li><li><a href="#listeners">Listeners</a><ul><li><a href="#afterconcentratedpoolcreated">AfterConcentratedPoolCreated</a></li><li><a href="#afterinitialpoolpositioncreated">AfterInitialPoolPositionCreated</a></li><li><a href="#afterlastpoolpositionremoved">AfterLastPoolPositionRemoved</a></li><li><a href="#afterconcentratedpoolswap">AfterConcentratedPoolSwap</a></li></ul></li><li><a href="#state-entries-and-kv-store-management">State Entries and KV Store Management</a></li><li><a href="#terminology">Terminology</a></li><li><a href="#twap-integration">TWAP Integration</a></li><li><a href="#external-sources">External Sources</a></li></ol><h1>Clients</h1><p>The following clients are available to interact with the Concentrated liquidity modules in Osmosis.</p><ul><li><a href="#js-client---osmojs">JS Client - (OsmoJS)</a></li><li><a href="#osmosis-rust-client-cosmwasm">Osmosis-rust Client (Cosmwasm)</a></li><li><a href="#hummingbot-client">Hummingbot client</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="js-client---osmojs">JS Client - (OsmoJS)<a class="hash-link" href="#js-client---osmojs" title="Direct link to heading">​</a></h2><p>Concentrated liquidity is available on the OsmoJS package. For more information please visit: <a href="https://github.com/osmosis-labs/osmojs" target="_blank" rel="noopener noreferrer">https://github.com/osmosis-labs/osmojs</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cosmwasm---osmosis-std">CosmWasm - (<code>osmosis-std</code>)<a class="hash-link" href="#cosmwasm---osmosis-std" title="Direct link to heading">​</a></h2><p>Concentrated liquidity types and querier are available on <a href="https://crates.io/crates/osmosis-std/" target="_blank" rel="noopener noreferrer"><code>osmosis-std</code> create.</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-osmosis-std">Install <code>osmosis-std</code><a class="hash-link" href="#install-osmosis-std" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cargo </span><span class="token function" style="color:rgb(220, 220, 170)">add</span><span class="token plain"> osmosis-std</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a class="hash-link" href="#usage" title="Direct link to heading">​</a></h3><p>The following is an example of how you might use types and querier in your CosmWasm contract, for more info, see the crate&#x27;s <a href="https://docs.rs/osmosis-std/osmosis_std/types/osmosis/concentratedliquidity/index.html" target="_blank" rel="noopener noreferrer">doc.rs</a>.</p><p>Note that queries are only available if they are <a href="https://github.com/osmosis-labs/osmosis/blob/main/wasmbinding/stargate_whitelist.go" target="_blank" rel="noopener noreferrer">whitelisted here</a>.</p><div class="language-rs codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rs codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">use osmosis_std::types::osmosis::concentratedliquidity::v1beta1 as cl;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">/// Create a copied position where owner of the position is this contract</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">/// and as desired amount might not be met, token_min_amount0 and token_min_amount1 are required</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">fn copy_position(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    deps: DepsMut,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    env: Env,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    position_id: u64,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    token_min_amount0: Uint128,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    token_min_amount1: Uint128,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">) -&gt; Result&lt;Response, ContractError&gt; {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // construct concentrated liquidity querier</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let cl_querier = cl::ConcentratedliquidityQuerier::new(&amp;deps.querier);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // query position by id</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let cl::QueryPositionByIdResponse { position } = cl_querier.position_by_id(position_id)?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let position_with_breakdown =</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        position.ok_or_else(|| StdError::not_found(&quot;Position with breakdown&quot;))?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let position = position_with_breakdown</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .position</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .ok_or_else(|| StdError::not_found(&quot;Position&quot;))?;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // create position with the same parameters</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let msg_create_position = cl::MsgCreatePosition {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        pool_id: position.pool_id,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        sender: env.contract.address.to_string(),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        lower_tick: position.lower_tick,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        upper_tick: position.upper_tick,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        token_desired0: position_with_breakdown.asset0,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        token_desired1: position_with_breakdown.asset1,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        token_min_amount0: token_min_amount0.to_string(),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        token_min_amount1: token_min_amount1.to_string(),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    Ok(Response::new()</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .add_message(msg_create_position)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .add_attribute(&quot;method&quot;, &quot;copy_position&quot;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .add_attribute(&quot;position_id&quot;, position_id.to_string())</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .add_attribute(&quot;token_min_amount0&quot;, token_min_amount0.to_string())</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .add_attribute(&quot;token_min_amount1&quot;, token_min_amount1.to_string()))</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Concentrated Liquidity Module Messages</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgcreateposition"><code>MsgCreatePosition</code><a class="hash-link" href="#msgcreateposition" title="Direct link to heading">​</a></h3><ul><li><strong>Request</strong></li></ul><p>This message allows LPs to provide liquidity between <code>LowerTick</code> and <code>UpperTick</code>
in a given <code>PoolId</code>. The user provides the amount of each token desired. Since
LPs are only allowed to provide liquidity proportional to the existing reserves,
the actual amount of tokens used might differ from requested. As a result, LPs
may also provide the minimum amount of each token to be used so that the system fails
to create position if the desired amounts cannot be satisfied.</p><p>Three KV stores are initialized when a position is created:</p><ol><li><code>Position ID -&gt; Position</code> - This is a mapping from a unique position ID to a
position object. The position ID is a monotonically increasing integer that is
incremented every time a new position is created.</li><li><code>Owner | Pool ID | Position ID -&gt; Position ID</code> - This is a mapping from a
composite key of the owner address, pool ID, and position ID to the position ID.
This is used to keep track of all positions owned by a given owner in a given pool.</li><li><code>Pool ID -&gt; Position ID</code> - This is a mapping from a pool ID to a position ID.
This is used to keep track of all positions in a given pool.</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgCreatePosition </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> PoolId          </span><span class="token builtin" style="color:rgb(86, 156, 214)">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Sender          </span><span class="token builtin" style="color:rgb(86, 156, 214)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> LowerTick       </span><span class="token builtin" style="color:rgb(86, 156, 214)">int64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> UpperTick       </span><span class="token builtin" style="color:rgb(86, 156, 214)">int64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> TokenDesired0   types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Coin</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> TokenDesired1   types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Coin</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> TokenMinAmount0 github_com_cosmos_cosmos_sdk_types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Int</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> TokenMinAmount1 github_com_cosmos_cosmos_sdk_types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Int</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Response</strong></li></ul><p>On successful response, we receive the actual amounts of each token used to
create the liquidityCreated number of shares in the given range.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgCreatePositionResponse </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> PositionId  </span><span class="token builtin" style="color:rgb(86, 156, 214)">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Amount0 github_com_cosmos_cosmos_sdk_types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Int</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Amount1 github_com_cosmos_cosmos_sdk_types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Int</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> JoinTime google</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">protobuf</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Timestamp</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> LiquidityCreated github_com_cosmos_cosmos_sdk_types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Dec</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This message should call the <code>createPosition</code> keeper method that is introduced
in the <code>&quot;Liquidity Provision&quot;</code> section of this document.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgwithdrawposition"><code>MsgWithdrawPosition</code><a class="hash-link" href="#msgwithdrawposition" title="Direct link to heading">​</a></h3><ul><li><strong>Request</strong></li></ul><p>This message allows LPs to withdraw their position via their position ID,
potentially in partial amount of liquidity. It should fail if the position ID
does not exist or if attempting to withdraw an amount higher than originally
provided. If an LP withdraws all of their liquidity from a position, then the
position is deleted from state along with the three KV stores that were
initialized in the <code>MsgCreatePosition</code> section. However, the spread factor accumulators
associated with the position are still retained until a user claims them manually.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgWithdrawPosition </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> PositionId      </span><span class="token builtin" style="color:rgb(86, 156, 214)">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Sender          </span><span class="token builtin" style="color:rgb(86, 156, 214)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> LiquidityAmount github_com_cosmos_cosmos_sdk_types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Dec</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Response</strong></li></ul><p>On successful response, we receive the amounts of each token withdrawn
for the provided share liquidity amount.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgWithdrawPositionResponse </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Amount0 github_com_cosmos_cosmos_sdk_types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Int</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Amount1 github_com_cosmos_cosmos_sdk_types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Int</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This message should call the <code>withdrawPosition</code> keeper method that is introduced
in the <code>&quot;Liquidity Provision&quot;</code> section of this document.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgcreatepool"><code>MsgCreatePool</code><a class="hash-link" href="#msgcreatepool" title="Direct link to heading">​</a></h3><p>This message is responsible for creating a concentrated-liquidity pool.
It propagates the execution flow to the <code>x/poolmanager</code> module for pool id
management and for routing swaps.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgCreateConcentratedPool </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Sender                    </span><span class="token builtin" style="color:rgb(86, 156, 214)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Denom0                    </span><span class="token builtin" style="color:rgb(86, 156, 214)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Denom1                    </span><span class="token builtin" style="color:rgb(86, 156, 214)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> TickSpacing               </span><span class="token builtin" style="color:rgb(86, 156, 214)">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> SpreadFactor                   github_com_cosmos_cosmos_sdk_types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Dec</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Response</strong></li></ul><p>On successful response, the pool id is returned.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgCreateConcentratedPoolResponse </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> PoolID </span><span class="token builtin" style="color:rgb(86, 156, 214)">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgcollectspreadrewards"><code>MsgCollectSpreadRewards</code><a class="hash-link" href="#msgcollectspreadrewards" title="Direct link to heading">​</a></h3><p>This message allows collecting rewards from spreads for multiple position IDs from a
single owner.</p><p>The spread factor collection is discussed in more detail in the &quot;Spread Rewards&quot; section of this document.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgCollectSpreadRewards </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> PositionIds    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token builtin" style="color:rgb(86, 156, 214)">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Sender         </span><span class="token builtin" style="color:rgb(86, 156, 214)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Response</strong></li></ul><p>On successful response, the collected tokens are returned.
The sender should also see their balance increase by the returned
amounts.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgCollectSpreadRewardsResponse </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> CollectedSpreadRewards </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain">types</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">Coin</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msgfungifychargedpositions"><code>MsgFungifyChargedPositions</code><a class="hash-link" href="#msgfungifychargedpositions" title="Direct link to heading">​</a></h3><p>This message allows fungifying the fully charged unlocked positions belonging to the same owner
and located in the same tick range.
MsgFungifyChargedPosition takes in a list of positionIds and combines them into a single position.
It validates that all positions belong to the same owner, are in the same ticks and are fully charged.
Fails if not. Otherwise, it creates a completely new position P. P&#x27;s liquidity equals to the sum of all
liquidities of positions given by positionIds. The uptime of the join time of the new position equals
to current block time - max authorized uptime duration (to signify that it is fully charged).
The previous positions are deleted from state. Prior to deleting, the rewards are claimed.
The old position&#x27;s unclaimed rewards are transferred to the new position.
The new position ID is returned.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgFungifyChargedPositions </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> PositionIds    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token builtin" style="color:rgb(86, 156, 214)">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> Sender         </span><span class="token builtin" style="color:rgb(86, 156, 214)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Response</strong></li></ul><p>On successful response, the new position id is returned.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> MsgFungifyChargedPositionsResponse </span><span class="token keyword" style="color:rgb(86, 156, 214)">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> NewPositionId </span><span class="token builtin" style="color:rgb(86, 156, 214)">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Incentives</h1><p>At launch, Osmosis&#x27;s CL incentives will primarily be in the format described <a href="https://github.com/osmosis-labs/osmosis/blob/main/x/concentrated-liquidity/README.md" target="_blank" rel="noopener noreferrer">here</a> while we iron out a mechanism that achieves the remaining two properties predictably and effectively. As a piece of foreshadowing, the primary problem space we will be tackling is the following: status quo incentives advantage LPs who keep their liquidity off the books until a trade happens, ultimately pushing liquidity off of the DEX and creating ambiguity around the &quot;real&quot; liquidity depth. This forces traders to make uninformed decisions about where to trade their assets (or worse, accept worse execution on an inferior venue).</p><p>In other words, instead of having incentives go towards bootstrapping healthy liquidity pools, they risk going towards adversely pushing volume to other exchanges at the cost of the DEX, active LPs, and ultimately traders.</p><p>Note on supported and authorized uptimes
If you dig through our incentives logic, you might find code dealing with notions of Supported Uptimes and Authorized Uptimes. These are for an uptime incentivization mechanism we are keeping off at launch while we refine a more sophisticated version. We leave the state-related parts in core logic to ensure that if we do decide to turn the feature on (even if just to experiment), it could be done by a simple governance proposal (to add more supported uptimes to the list of authorized uptimes) and not require a state migration for pools. At launch, only the 1ns uptime will be authorized, which is roughly equivalent to status quo CL incentives with the small difference that positions that are created and closed in the same block are not eligible for any incentives.</p><p>For the sake of clarity, this mechanism functions very similarly to status quo incentives, but it has a separate accumulator for each supported uptime and ensures that only liquidity that has been in the pool for the required amount of time qualifies for claiming incentives.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="incentive-creation-and-querying">Incentive Creation and Querying<a class="hash-link" href="#incentive-creation-and-querying" title="Direct link to heading">​</a></h2><p>While it is technically possible for Osmosis to enable the creation of incentive records directly in the CL module, incentive creation is currently funneled through existing gauge infrastructure in the <code>x/incentives</code> module. This simplifies UX drastically for frontends, external incentive creators, and governance, while making CL incentives fully backwards-compatible with incentive creation and querying flows that everyone is already used to. As of the initial version of Osmosis&#x27;s CL, all incentive creation and querying logic will be handled by respective gauge functions (e.g. the <code>IncentivizedPools</code> query in the <code>x/incentives</code> module will include CL pools that have internal incentives on them).</p><p>To create a gauge dedicated to the concentrated liquidity pool, run a <code>MsgCreateGauge</code> message in the <code>x/incentives</code> module with the following parameter constraints:</p><ul><li><code>PoolId</code>: The ID of the CL pool to create a gauge for.</li><li><code>DistrTo.LockQueryType</code> must be set to <code>locktypes.LockQueryType.NoLock</code></li><li><code>DistrTo.Denom</code> must be an empty string.</li></ul><p>The rest of the parameters can be set according to the desired configuration of the gauge. Please read the <code>x/incentives</code> module documentation for more information on how to configure gauges.</p><p>Note, that the created gauge will start emitting at the first epoch after the given <code>StartTime</code>. During the epoch, a <code>x/concentrated-liquidity</code>
module <code>IncentiveRecord</code> will be created for every denom in the gauge. This incentive record will be configured to emit all given incentives
over the period of an epoch. If the gauge is non-perpetual (emits over several epochs), the distribution will be split evenly between the epochs.
and a new <code>IncentiveRecord</code> will be created for each denom every epoch with the emission rate and token set to finish emitting at the end of the epoch.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reward-splitting-between-classic-and-cl-pools">Reward Splitting Between Classic and CL pools<a class="hash-link" href="#reward-splitting-between-classic-and-cl-pools" title="Direct link to heading">​</a></h2><p>While we want to nudge Classic pool LPs to transition to CL pools, we also want to ensure that we do not have a hard cutoff for incentives where past a certain point it is no longer worth it to provide liquidity to Classic pools. This is because we want to ensure that we have a healthy transition period where liquidity is not split between Classic and CL pools, but rather that liquidity is added to CL pools while Classic pools are slowly drained of liquidity.</p><p>To achieve this in a way that is difficult to game and efficient for the chain to process, we will be using a <strong>reward-splitting</strong> mechanism that treats <em>bonded</em> liquidity in a Classic pool that is paired by governance to a CL pool (e.g. for the purpose of migration) as a single full-range position on the CL pool for the purpose of calculating incentives. Note that this <em>does not affect spread reward distribution</em> and only applies to the flow of incentives through a CL pool.</p><p>One implication of this mechanism is that it moves the incentivization process to a higher level of abstraction (incentivizing <em>pairs</em> instead of <em>pools</em>). For internal incentives (which are governance managed), this is in line with the goal of continuing to push governance to require less frequent actions, which this change ultimately does.</p><p>To keep a small but meaningful incentive for LPs to still migrate their positions, we have added a <strong>discount rate</strong> to incentives that are redirected to Classic pools. This is initialized to 5% by default but is a governance-upgradable parameter that can be increased in the future. A discount rate of 100% is functionally equivalent to all the incentives staying in the CL pool.</p><h1>Parameters</h1><ul><li><code>AuthorizedQuoteDenoms</code> []string</li></ul><p>This is a list of quote denoms that can be used as token1 when creating a pool.
We limit the quote assets to a small set for the purposes of having convenient
price increments stemming from tick to price conversion. These increments are
in a human readable magnitude only for token1 as a quote. For limit orders in
the future, this will be a desirable property in terms of UX as to allow users
to set limit orders at prices in terms of token1 (quote asset) that are easy
to reason about.</p><p>This goes in-hand with centralized exchanges that limit the quote asset set
to only a few denoms.</p><p>Our list at launch is expected to consist of OSMO, DAI and USDC. These are set
in the v16 upgrade handler.</p><ul><li><code>IsPermisionlessPoolCreationEnabled</code> bool</li></ul><p>The flag indicating whether permissionless pool creation is enabled or not. For
launch, we have decided to disable permissionless pool creation. It will still
be enabled via governance. This is because we want to limit the number of pools
for risk management and want to avoid fragmenting liquidity for major denom
pairs with configurations of tick spacing that are not ideal.</p><h1>Listeners</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="afterconcentratedpoolcreated"><code>AfterConcentratedPoolCreated</code><a class="hash-link" href="#afterconcentratedpoolcreated" title="Direct link to heading">​</a></h2><p>This listener executes after the pool is created.</p><p>At the time of this writing, it is only utilized by the <code>x/twap</code> module.
The twap module is expected to create twap records where the last error time
is set to the block time of when the pool was created. This is because there
is no liquidity in the pool at creation time.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="afterinitialpoolpositioncreated"><code>AfterInitialPoolPositionCreated</code><a class="hash-link" href="#afterinitialpoolpositioncreated" title="Direct link to heading">​</a></h2><p>This listener executes after the first position is created in a concentrated
liquidity pool.</p><p>At the time of this writing, it is only utilized by the <code>x/twap</code> module.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="afterlastpoolpositionremoved"><code>AfterLastPoolPositionRemoved</code><a class="hash-link" href="#afterlastpoolpositionremoved" title="Direct link to heading">​</a></h2><p>This listener executes after the last position is removed in a concentrated
liquidity pool.</p><p>At the time of this writing, it is only utilized by the <code>x/twap</code> module.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="afterconcentratedpoolswap"><code>AfterConcentratedPoolSwap</code><a class="hash-link" href="#afterconcentratedpoolswap" title="Direct link to heading">​</a></h2><p>This listener executes after a swap in a concentrated liquidity pool.</p><p>At the time of this writing, it is only utilized by the <code>x/twap</code> module.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-entries-and-kv-store-management">State entries and KV store management<a class="hash-link" href="#state-entries-and-kv-store-management" title="Direct link to heading">​</a></h2><p>The following are the state entries (key and value pairs) stored for the concentrated liquidity module. </p><ul><li>structs<ul><li>TickPrefix + pool ID + tickIndex ➝ Tick Info struct</li><li>PoolPrefix + pool id ➝ pool struct</li><li>IncentivePrefix | pool id | min uptime index | denom | addr ➝ Incentive Record body struct</li></ul></li><li>links<ul><li>positionToLockPrefix | position id ➝ lock id</li><li>lockToPositionPrefix | lock id ➝ position id</li><li>PositionPrefix | addr bytes | pool id | position id ➝ boolean</li><li>PoolPositionPrefix | pool id | position id ➝ boolean</li></ul></li></ul><p>Note that for storing ticks, we use 9 bytes instead of directly using uint64, first byte being reserved for the Negative / Positive prefix, and the remaining 8 bytes being reserved for the tick itself, which is of uint64. Although we directly store signed integers as values, we use the first byte to indicate and re-arrange tick indexes from negative to positive.</p><h1>Terminology</h1><p>We will use the following terms throughout the document and our codebase:</p><ul><li><p><code>Tick</code> - a unit that has a 1:1 mapping with price</p></li><li><p><code>Bucket</code> - an area between two initialized ticks.</p></li><li><p><code>Tick Range</code> - a general term to describe a concept with lower and upper bound.</p><ul><li>Position is defined on a tick range.</li><li>Bucket is defined on a tick range.</li><li>A trader performs a swap over a tick range.</li></ul></li><li><p><code>Tick Spacing</code> - the distance between two ticks that can be initialized. This is
what defines the minimum bucket size.</p></li></ul><p>Note that ticks are defined inside buckets. Assume tick spacing is 100. A liquidity provider
creates a position with amounts such that the current tick is 155 between ticks 100 and 200.</p><p>Note, that the current tick of 155 is defined inside the bucket over a range of 100 to 200.</p><h1>Liquidity Depths Calculation</h1><p>Please refer to <a href="https://github.com/osmosis-labs/osmosis/pull/5673" target="_blank" rel="noopener noreferrer">https://github.com/osmosis-labs/osmosis/pull/5673</a> for liquidity depths calculation for CL Pools. (This is just a place holder, will link correct link for doc once merged to main)</p><h1>TWAP Integration</h1><p>In the context of twap, concentrated liquidity pools function differently from
CFMM pools.</p><p>There are 2 major differences that stem from how the liquidity is added and
removed in concentrated-liquidity.</p><p>The first one is given by the fact that a user does not provide liquidity at
pool creation time. Instead, they have to issue a separate message post-pool
creation. As a result, there can be a time where there is no valid spot price
initialized for a concentrated liquidity pool. When a concentrated liquidity pool
is created, the <code>x/twap</code> module still initializes the twap records. However, these
records are invalidated by setting the &quot;last error time&quot; field to the block time
at pool creation. Only adding liquidity to the pool will initialize the spot price
and twap records correctly. One technical detail to note is that adding liquidity
in the same block as pool creation will still set the &quot;last error time&quot; field to
the block time despite spot price already being initialized. Although we fix an
error within that block, it still occurs. As a result, this is deemed acceptable.
However, this is a technical trade-off for implementation simplicity and not an
intentional design decision.</p><p>The second difference from balancer pools is focused around the fact that
liquidity can be completely removed from a concentrated liquidity pool,
making its spot price be invalid.</p><p>To recap the basic LP functionality in concentrated liquidity, a user adds
liqudity by creating a position. To remove liquidity, they withdraw their
position. Contrary to CFMM pools, adding or removing liquidity does not affect
the price in 99% of the cases in concentrated liquidity. The only two exceptions
to this rule are:</p><p><strong>Creating the first position in the pool.</strong></p><p>In this case, we transition from invalid state where there is no liqudity, and
the spot price is uninitialized to the state where there is some liqudity, and
as a result a valid spot price.</p><p>Note, that if there is a pool where liqudiity is completely drained and re-added,
the TWAP&#x27;s last error time will be pointing at the time when the liquidity was drained.
This is different from how twap functions in CFMM pool where liquidity cannot
be removed in-full.</p><p><strong>Removing the last position in the pool.</strong></p><p>In this case, we transition from a valid state with liquidity and spot price to
an invalid state where there is no liquidity and, as a result, no valid spot
price anymore. The last spot price error will be set to the block time of when
the last position was removed.</p><p>To reiterate, the above two exceptions are the only cases where twap is updated
due to adding or removing liquidity.</p><p>The major source of updates with respect to twap is the swap logic. It functions
similarly to CFMM pools where upon the completion of a swap, a listener <code>AfterConcentratedPoolSwap</code>
propagates the execution to the twap module for the purposes of tracking state updates
necessary to retrieve the spot price and update the twap accumulators
(more details in x/twap module).</p><p>Lastly, see the &quot;Listeners&quot; section for more details on how twap is enabled by
the use of these hooks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="external-sources">External Sources<a class="hash-link" href="#external-sources" title="Direct link to heading">​</a></h2><ul><li><a href="https://uniswap.org/whitepaper-v3.pdf" target="_blank" rel="noopener noreferrer">Uniswap V3 Whitepaper</a></li><li><a href="https://atiselsts.github.io/pdfs/uniswap-v3-liquidity-math.pdf" target="_blank" rel="noopener noreferrer">Technical Note on Liquidity Math</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/osmosis-labs/docs/tree/main/docs/overview/integrate/on-chain.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/overview/integrate/airdrops"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Airdrop Distribution</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/overview/integrate/transfer"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Connect with Osmosis</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#js-client---osmojs" class="table-of-contents__link toc-highlight">JS Client - (OsmoJS)</a></li><li><a href="#cosmwasm---osmosis-std" class="table-of-contents__link toc-highlight">CosmWasm - (<code>osmosis-std</code>)</a><ul><li><a href="#install-osmosis-std" class="table-of-contents__link toc-highlight">Install <code>osmosis-std</code></a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#msgcreateposition" class="table-of-contents__link toc-highlight"><code>MsgCreatePosition</code></a></li><li><a href="#msgwithdrawposition" class="table-of-contents__link toc-highlight"><code>MsgWithdrawPosition</code></a></li><li><a href="#msgcreatepool" class="table-of-contents__link toc-highlight"><code>MsgCreatePool</code></a></li><li><a href="#msgcollectspreadrewards" class="table-of-contents__link toc-highlight"><code>MsgCollectSpreadRewards</code></a></li><li><a href="#msgfungifychargedpositions" class="table-of-contents__link toc-highlight"><code>MsgFungifyChargedPositions</code></a></li></ul></li><li><a href="#incentive-creation-and-querying" class="table-of-contents__link toc-highlight">Incentive Creation and Querying</a></li><li><a href="#reward-splitting-between-classic-and-cl-pools" class="table-of-contents__link toc-highlight">Reward Splitting Between Classic and CL pools</a></li><li><a href="#afterconcentratedpoolcreated" class="table-of-contents__link toc-highlight"><code>AfterConcentratedPoolCreated</code></a></li><li><a href="#afterinitialpoolpositioncreated" class="table-of-contents__link toc-highlight"><code>AfterInitialPoolPositionCreated</code></a></li><li><a href="#afterlastpoolpositionremoved" class="table-of-contents__link toc-highlight"><code>AfterLastPoolPositionRemoved</code></a></li><li><a href="#afterconcentratedpoolswap" class="table-of-contents__link toc-highlight"><code>AfterConcentratedPoolSwap</code></a></li><li><a href="#state-entries-and-kv-store-management" class="table-of-contents__link toc-highlight">State entries and KV store management</a></li><li><a href="#external-sources" class="table-of-contents__link toc-highlight">External Sources</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="margin-bottom--sm"><a class="footerLogoLink_DDai" href="/"><img src="/logo/light.svg" alt="Osmosis Docs" class="themedImage_ToTc themedImage--light_HNdA footer__logo" height="36px"><img src="/logo/dark.svg" alt="Osmosis Docs" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" height="36px"></a></div><div class="footer__row"><div class="footer__data"><div class="footer__cta"></div></div><div class="links"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://app.osmosis.zone" target="_blank" rel="noopener noreferrer" class="footer__link-item">Launch App</a></li><li class="footer__item"><a href="https://docs.osmosis.zone" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Portal</a></li><li class="footer__item"><a href="https://osmosis.zone/ecosystem" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ecosystem</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.osmosis.zone" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation</a></li><li class="footer__item"><a href="https://medium.com/@Osmosis" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://commonwealth.im/osmosis/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community</a></li></ul></div></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © Osmosis Labs since 2023. All rights reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e6c983dc.js"></script>
<script src="/assets/js/main.8b3b5676.js"></script>
</body>
</html>